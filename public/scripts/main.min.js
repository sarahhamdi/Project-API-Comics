"use strict";var helpers={cleanup:function(e){var n=String(e);return n=helpers.replaceWeirdChars(n),"[object Object]"==(n=helpers.truncateDesc(n))&&(n="Description not available, sorry! It's probably ðŸ”¥ though."),n},replaceWeirdChars:function(e){return e.replace(/&lt;\/*[a-z]*&gt;/g,"").replace(/&amp;/g,"&").replace(/&lt;br \/&gt;/g," ").replace(/<br \/>/g," ")},truncateDesc:function(e){return 600<e.length?"".concat(e.slice(0,600)," ..."):e},rating:function(e){for(var n=[],r=parseInt(e),a=0;a<r;a++)n.push('<img class="star" src="public/assets/star.svg">');return n=n.join(" ")},tpl:function(e){return"http://www.torontopubliclibrary.ca/search.jsp?Ntt=".concat(e)},bookcovers:function(e,n){var r=e,a=/nophoto/,t=a.exec(r),o=e.replace(/m\//g,"l/").replace(/col\//g,"com/");return null===a.exec(t)?o:"http://covers.openlibrary.org/b/isbn/"+parseInt(n)+"-L.jpg?default=false"},bookcoversBlank:function(){$(".bookcover").on("error",function(){$(this).attr("src","public/assets/blankcover.png")})},initSlider:function(){var e=sheetsu.filteredBooks.length-1;generic.index==e?(console.warn(e),new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,loop:!0,paginationBulletRender:function(e,n,r){return'<span class="'+r+'">'+(n+1)+"</span>"}}),$(".spinner").hide(),$("#results").addClass("show")):generic.index++},resetSlider:function(){$("#wrapper").empty(),$(".swiper-pagination").empty()},dropdownCollapseExpand:function(){$("#dropdown").on("click",function(e){e.preventDefault(),$(".dropdown--options").toggleClass("show")})},printToPage:function(e){var n=e.GoodreadsResponse.book,r=n.title,a=helpers.tpl(n.isbn),t=helpers.bookcovers(n.image_url,n.isbn),o=helpers.cleanup(n.description),s=helpers.rating(n.average_rating),c=n.link,i="[object Object]"==n.publisher?"Not Available":n.publisher,l=n.authors.author.name?n.authors.author.name:n.authors.author.map(function(e){return e.name}),p='<p class="flex-item-1">\n            <img src="'.concat(t,'" class="bookcover">\n        </p>\n        <div class="flex-item-2">\n            <h2 class="results-title">').concat(r,"</h2>\n            <h3>By: ").concat(l,"</h3>\n            <h4>Publisher: ").concat(i,'</h4>\n            <p class="results-description">').concat(o,'</p>\n            <p class="results-link"><a href="').concat(c,'">Read more on Goodreads</a></p>\n            <p>').concat(s,'</p>\n            <p><a href="').concat(a,'"><img src="public/assets/tpl-logo.png" class="tpl"></a></p>\n        </div>');$("#wrapper").append('<div class="swiper-slide">'+p+"</div>").addClass("swiper-wrapper"),$("#container").addClass("swiper-container"),$("#pagination").addClass("swiper-pagination"),helpers.bookcoversBlank()},scrollToElement:function(e){$("html, body").animate({scrollTop:$(e).offset().top+"px"},"fast")}};
"use strict";var sheetsu={},goodreads={},generic={},comicsApp={userInputArray:[]};sheetsu.books=[],generic.index=0,sheetsu.endpoint="https://sheetlabs.com/SARA/comicslgbtqpoc?",goodreads.endpoint="https://www.goodreads.com/book/title.xml",goodreads.key="AYoaCzPGXisCTWsP6Ainw",generic.error=function(e){console.log("goodreads error ".concat(e)),helpers.initSlider()},goodreads.success=function(e){helpers.printToPage(e),helpers.initSlider()},sheetsu.success=function(e){sheetsu.filtered(e)},sheetsu.filtered=function(e){sheetsu.filteredBooks=e.filter(function(s){return comicsApp.userInputArray.every(function(e){return"1"===s[e]})}),sheetsu.filteredBooks.map(function(e){console.log(e.bookTitle),goodreads.getData(e.booktitle)})},sheetsu.getData=function(){return $.ajax({url:sheetsu.endpoint,crossDomain:!0,beforeSend:function(e,s){e.setRequestHeader("Authorization","Basic "+btoa("s.hamdi@gmail.com:t_a1ae6e22b56cf1358a57c229a018dd93"))},dataType:"json",type:"GET",success:sheetsu.success,error:generic.error})},goodreads.getData=function(e){return $.ajax({url:"https://proxy.hackeryou.com",dataType:"json",method:"GET",data:{reqUrl:goodreads.endpoint,params:{key:goodreads.key,title:e},xmlToJSON:!0},success:goodreads.success,error:generic.error})},comicsApp.getUserInput=function(){helpers.dropdownCollapseExpand(),$(".choose-comics").on("submit",function(e){$(".spinner").show(),helpers.scrollToElement(".small"),e.preventDefault(),generic.index=0,comicsApp.userInputArray=[],helpers.resetSlider(),$("input:checked").each(function(){comicsApp.userInputArray.push($(this).val())}),sheetsu.getData()})},$(function(){comicsApp.getUserInput()});